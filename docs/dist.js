"use strict";(()=>{var{console:qe,queueMicrotask:He,Element:Ie}=globalThis,h=(e,t,r)=>({type:e,props:t,key:r}),x=h;var me={},ge={},Oe=h(ge,me),ye={},Xe=[],Qe="moveBefore"in Ie.prototype?"moveBefore":"insertBefore",Ye="http://www.w3.org/2000/svg",Ge=e=>qe.error(e),be=e=>e==null||e===!1||e==="",N=e=>typeof e=="function",F=e=>typeof e=="object"&&e!==null,Y=e=>e.children,W=e=>e.children,ve=e=>(E.catch=e.catch,e.children),we=e=>{let t=({value:r,children:n})=>{let s=E,u=S(()=>{let o={deps:new Set,value:r};return s.contexts=new Map(s.contexts).set(t,o),o});if(r!==u.value){u.value=r;for(let o of u.deps){o.state=1;let{parent:l}=o;for(;l&&l!==s&&!l.state;)l.state=2,{parent:l}=l}}return n};return t.value=e,t},Je=(e,t,r)=>N(e)||e===ge?null:e===ye?r.ownerDocument.createTextNode(t.nodeValue):r.ownerDocument.createElementNS(e==="svg"?Ye:"namespaceURI"in r?r.namespaceURI:r.host.namespaceURI,e),Ze=e=>e.nodeType===e.TEXT_NODE,pe=(e,t)=>t in e&&(e[t]==null||!F(e[t])),he=(e,t,r)=>{if(Ze(e)){e.nodeValue=r.nodeValue;return}for(let n in t)n==="children"||n in r||(n==="ref"?t.ref&&(t.ref.current=null):pe(e,n)?e[n]="":e.removeAttribute(n));for(let n in r)if(!(n==="children"||t[n]===r[n]))if(n==="ref")t.ref&&(t.ref.current=null),r.ref&&(r.ref.current=e);else if(n==="style"&&F(r[n])){let{style:s}=e,u=F(t[n])?t[n]:{},o=r[n];for(let l in u)l in o||(s[l]="");for(let l in o)s[l]=o[l]??""}else pe(e,n)?e[n]=r[n]??"":r[n]!=null?e.setAttribute(n,r[n]):e.removeAttribute(n)},E=null,X=0,Q=0,j=e=>{let t=E;t.refs??=[];let r=t.refs[Q++];return r||(r={current:N(e)?e():e},t.refs.push(r)),r},z=(e,t)=>{let r=E;r.effects??=[];let n=r.effects[X++];n?(!n.deps||!t||xe(n.deps,t))&&(n.after=e,n.deps=t):r.effects.push({before:void 0,after:e,deps:t})},S=(e,t=Xe)=>{let r=j(()=>({value:e(),deps:t}));return xe(r.current.deps,t)&&(r.current.value=e(),r.current.deps=t),r.current.value},A=e=>{let t=E,r=S(()=>[N(e)?e():e,n=>{let s=N(n)?n(r[0]):n;return s!==r[0]&&(r[0]=s,rt(t)),s}]);return r},xe=(e,t)=>{if(e===t)return!1;let{length:r}=e;if(r!==t.length)return!0;for(;r--;)if(e[r]!==t[r])return!0;return!1},K=e=>{let t=j(()=>e);return t.current=e,S(()=>((...r)=>t.current.apply(null,r)))},et=(e,t)=>{if(e===t)return!0;for(let r in e)if(e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0},G=(e,t=et)=>(e.memo=t,e),re=e=>{let t=E,r=t.contexts?.get(e);return z(()=>{if(r)return r.deps.add(t),()=>r.deps.delete(t)},[r,t]),(r??e).value},tt=(e,t)=>{for(;e.depth>t.depth;)if(e=e.parent,e===t)return 1;for(;t.depth>e.depth;)if(t=t.parent,t===e)return-1;for(;e.parent!==t.parent;)e=e.parent,t=t.parent;return e.index-t.index},rt=e=>{if(e.state===1||e.state===3)return;let{queues:t}=e,{updates:r}=t;r.length===0&&He(()=>{let n=r.sort(tt);t.updates=[];for(let s of n)s.state===1&&oe(s);Ee(t)}),r.push(e),e.state=1},ot=e=>{let{children:t}=e.props;if(N(e.type)){let r=[E,X,Q];E=e,X=0,Q=0;try{t=e.type(e.props)}catch(n){t=null,e.catch(n)}finally{[E,X,Q]=r}}return be(t)?[]:Array.isArray(t)?t:[t]},nt=e=>be(e)?Oe:Array.isArray(e)?h(Y,{children:e}):F(e)&&(typeof e.type=="string"||N(e.type))&&F(e.props)&&"key"in e?e:h(ye,{nodeValue:e}),ke=e=>{let{child:t,state:r}=e;if(r===1)oe(e);else if(r===2)for(e.state=0;t;t=t.sibling)ke(t)},oe=e=>{let{depth:t,queues:r}=e,{afterEffects:n,inserts:s,nodeUpdates:u}=r,o=e.child,l=o&&new Map;for(;o;o=o.sibling)l.set(o.key??o.index,o);let b=e.node??e.parentNode,w=ot(e);if(e.effects)try{for(let m of e.effects)m.after&&m.before&&(m.before(),m.before=void 0)}catch(m){e.catch(m)}e.state=0,e.child=null;let p=e.node?null:e.prevNode;for(let m=0,f=null;m<w.length;++m){let{type:c,props:i,key:d}=nt(w[m]),a=l?.get(d??m),g=null,R=!1;if(a?.type===c)l.delete(d??m),a.index=m,a.sibling=null,(!N(a.type)||!a.type.memo?.(a.props,i))&&(a.node&&(g=[a.node,a.props,i]),a.props=i,a.state=1),a.parentNode===e.node&&a.lastNode&&a.prevNode!==p&&(R=!0);else{try{a={catch:e.catch,child:null,contexts:e.contexts,depth:t+1,effects:null,index:m,key:d,lastNode:null,node:Je(c,i,b),parent:e,parentNode:c===W?i.to:b,prevNode:c===W?i.to.lastChild:p,props:i,queues:r,refs:null,sibling:null,state:1,type:c}}catch(M){e.catch(M);continue}a.node&&(R=!0)}a.parentNode===b&&(a.prevNode=p),f?f.sibling=a:e.child=a,ke(a),g&&u.push(g),R&&s.push(a),a.parentNode===b&&a.lastNode&&(p=a.lastNode),f=a}if(e.lastNode=e.node??p??null,l)for(let m of l.values())Se(m);e.effects&&n.push(e)},Se=(e,t=!0)=>{e.state=3;let{effects:r,child:n,props:s,node:u}=e;if(r)try{for(let l of r)l.before&&(l.before(),l.before=void 0)}catch(l){e.catch(l)}let o=t&&!u;for(;n;n=n.sibling)Se(n,o||n.type===W);u&&(s.ref&&(s.ref.current=null),t&&e.queues.removes.push(u))},Ee=e=>{for(let t of e.removes)t.remove();e.removes=[];for(let t of e.inserts){let{parentNode:r,prevNode:n,props:s}=t,u=n?n.nextSibling:r.firstChild;for(let o=t;o;){let{node:l}=o;if(l){if(!l.parentNode){he(l,me,s),r.insertBefore(l,u);break}if(l===u||l.nextSibling===u||(r[Qe](l,u),o===t))break}if(o.child&&!l)o=o.child;else if(o.sibling)o=o.sibling;else{for(;o!==t&&o.parent&&!o.sibling;)o=o.parent;if(o===t)break;o=o.sibling}}}e.inserts=[];for(let t of e.nodeUpdates)he.apply(null,t);e.nodeUpdates=[];for(let t of e.afterEffects)try{for(let r of t.effects)r.after&&(r.before=r.after(),r.after=void 0)}catch(r){t.catch(r)}e.afterEffects=[]},Ce=e=>{let t={catch:Ge,child:null,contexts:null,depth:0,effects:null,index:0,key:void 0,lastNode:null,node:null,parent:null,parentNode:e,prevNode:e.lastChild,props:{children:void 0},queues:{afterEffects:[],inserts:[],nodeUpdates:[],removes:[],updates:[]},refs:null,sibling:null,state:1,type:Y};return r=>{t.props.children=r,oe(t),Ee(t.queues)}};var Re=["anchor","archway","aurora","boulder","braid","bristle","canyon","cavern","chisel","cinder","cliffside","cobblestone","comet","compass","copper","crystal","current","drift","driftwood","dune","echo","echoes","echoing","ember","emberglow","forge","fossil","fractal","fresco","galaxy","gilded","glacier","groaning","grotto","grove","gust","harbor","harrow","harvest","hollow","horizon","horizonfall","iceberg","kettle","labyrinth","lantern","lichen","lilac","lumen","marble","meadow","meander","minaret","moss","mossy","nebula","oasis","orbit","orchard","peak","petal","pillar","prism","quill","quilt","reed","relic","ripple","rivet","rune","sandstone","seaway","serpent","shimmer","silken","soot","spiral","spire","spirelet","summit","summons","sunflare","talon","terrace","thicket","thistle","timber","torrent","traverse","tundra","turbine","tusk","vault","velvet","verdant","vessel","voyage","whisper","willow","windward","zephyr"],Me=()=>Re[Math.floor(Math.random()*Re.length)];var{document:L,getComputedStyle:st,Document:Te,ResizeObserver:Ne,window:ze,Window:lt}=globalThis,{body:Ae}=L,ct=L.scrollingElement,V=ze.visualViewport??ze,it=10,at={x:"clientWidth",y:"clientHeight"},ft={x:"innerWidth",y:"innerHeight"},dt={x:"overflowX",y:"overflowY"},ne={x:"right",y:"bottom"},Le={x:"width",y:"height"},ut={x:"scrollWidth",y:"scrollHeight"},pt={x:"scrollLeft",y:"scrollTop"},ht=({axis:e,el:t})=>{for(;(t&&=t.parentElement)&&!(t===Ae||!Ae.contains(t));){if(t[ut[e]]<=t[at[e]])continue;let r=st(t)[dt[e]];if(r==="scroll"||r==="auto")return t}return L},Pe=({axis:e="y",containerRef:t,growBuffer:r=200,length:n=0,minIndex:s=0,shrinkBuffer:u=r+200})=>{let o=S(()=>({cache:{},columns:1,isRendering:!1,observed:null,observer:null,prev:{cache:{},minIndex:s,start:s},scrollParent:null,scrollTarget:null,syncUpdateCount:0,resolve:()=>{o.scrollTarget=null,o.syncUpdateCount=0}})),l=K(()=>{if(o.isRendering)return;let f=t.current,{end:c,start:i}=p;if(!f||i===c||f.children.length!==c-i)return o.resolve();let{cache:d,prev:a,scrollTarget:g}=o,R=p.start,M=[],k,y=1;for(let v of f.children){let fe=v.getBoundingClientRect(),de=fe[Le[e]];d[R++]=de,M.push(de);let ue=fe[e];k==null?k=ue:ue===k&&++y}let je=M.sort()[Math.floor(M.length/2)];o.columns=y;let T=ht({axis:e,el:f});T!==o.scrollParent&&(o.scrollParent!==L&&o.scrollParent?.removeEventListener("scroll",l),T!==L&&T.addEventListener("scroll",l),o.scrollParent=T);let P=T instanceof Te?ct:T,U=pt[e],J=0,Ke=Math.min(a.minIndex,s),Ve=Math.max(a.start,p.start);for(let v=Ke;v<Ve;v+=y)J+=(d[v]??0)-(a.cache[v]??0);if(J&&(P[U]+=J),o.prev={cache:{...d},minIndex:s,start:p.start},o.syncUpdateCount++>it)return o.resolve();let Z=f.getBoundingClientRect(),_=Z[e]+p.before,q=Z[ne[e]]-p.after,ce=T instanceof Te?{[e]:0,[ne[e]]:V instanceof lt?V[ft[e]]:V[Le[e]]}:T.getBoundingClientRect(),H=ce[e],ee=ce[ne[e]],te=s+n;for(let v=s;v<te;++v)d[v]??=je;i-=(i-s)%y;let ie=(c-s)%y;for(ie&&(c+=y-ie);i-y>=s&&_>H-r;)_-=d[i-y],i-=y;for(;i<te&&_+d[i]<=H-u;)_+=d[i],i+=y;for(;c<te&&q<ee+r;)q+=d[c],c+=y;for(;c-y>=s&&q-d[c-y]>=ee+u;)q-=d[c-y],c-=y;let B=w({end:c,start:i});if(B.after!==p.after||B.before!==p.before||B.end!==p.end||B.start!==p.start)return o.isRendering=!0,m(B);if(!g)return o.resolve();let{index:D}=g;D=Math.min(s+n-1,Math.max(D,s)),D-=(D-s)%y;let ae=0;for(let v=s;v<D;v+=y)ae+=d[v];let I=P[U],_e=d[D],$=Z[e]+I-H+ae-g.buffer,O=$-(ee-H)+_e+g.buffer*2;g.align==="nearest"&&($<O?g.align="center":I>$?g.align="start":I<O&&(g.align="end")),g.align==="start"?P[U]=$:g.align==="end"?P[U]=O:g.align==="center"&&(P[U]=($+O)/2),P[U]===I?o.resolve():l()}),b=K(({align:f="nearest",buffer:c=0,index:i})=>{o.scrollTarget={align:f,buffer:c,index:i},l()}),w=({end:f,start:c})=>{if(r===1/0)return{after:0,before:0,end:s+n,scrollTo:b,start:s};let{cache:i,columns:d}=o,a=s+n;c-=(c-s)%d,c=Math.min(a,Math.max(c,s));let g=(f-s)%d;g&&(f+=d-g),f=Math.min(a,Math.max(f,c)),f-c<=d&&(f<a?f=Math.min(a,f+d):c>s&&(c-=d));let R=0,M=0;for(let k=s;k<a;k+=d)k<c?R+=i[k]??0:k>=f&&(M+=i[k]??0);return{after:M,before:R,end:f,scrollTo:b,start:c}},[p,m]=A({after:0,before:0,end:0,scrollTo:b,start:0});return S(()=>{Object.assign(p,w({end:p.end,start:p.start}))},[n,s]),o.observer??=Ne&&new Ne(l),z(()=>{let{observed:f,observer:c}=o,i=t.current;c&&f!==i&&(f&&c.unobserve(f),i&&c.observe(i),o.observed=i),o.isRendering=!1,l()}),z(()=>{let{observer:f}=o;return V.addEventListener("resize",l),L.addEventListener("scroll",l),()=>{f?.disconnect(),V.removeEventListener("resize",l),L.removeEventListener("scroll",l),o.scrollParent?.removeEventListener("scroll",l)}},[o,l]),p};var{clearTimeout:Ue,clearInterval:mt,document:Fe,setTimeout:De,setInterval:gt}=globalThis,C=10,Be=new Intl.NumberFormat,$e=e=>`rgb(${32+e*12%128}, ${32+e*23%128}, ${32+e*56%128})`,yt=({children:e})=>{if(Math.random()<.005)throw new Error("red");return z(()=>{if(Math.random()<.005)throw new Error("blue");return()=>{if(Math.random()<.005)throw new Error("yellow")}}),e},bt=G(()=>x("div",{style:{background:"#fff9",borderRadius:"0.25rem",padding:"1rem"},children:["Portal: ",re(le)]})),vt=G(({x:e,y:t})=>{let r=re(le),n=S(()=>`rgb(${128+(e-t)/C*128}, ${128+(t-e)/C*128}, ${(e+t)/C/2*256})`),s=j(void 0),[u,o]=A("black"),l=K(()=>{o(n),Ue(s.current),s.current=De(()=>o("black"),5e3)}),b=1+Math.floor(Math.random()*10);return h(ve,{catch:w=>{o(w.message),Ue(s.current),s.current=De(()=>o("black"),5e3)},children:x("div",{onpointerdown:l,onpointermove:l,style:{alignItems:"center",backgroundColor:u,borderRadius:"0.25rem",display:"flex",fontSize:"0.75rem",flexDirection:"column",gap:"0.25rem",justifyContent:"center",minWidth:"0",overflow:"hidden",padding:"0.25rem",textAlign:"center",transition:u==="black"?"all 5s":""},children:[h("select",{value:(Math.floor(Math.random()*b)+1).toString(),children:Array.from({length:b},(w,p)=>h("option",{value:(p+1).toString(),children:p+1},p))}),u==="red"?"Fake Render Error":u==="blue"?"Fake After Effect Error":u==="yellow"?"Fake Before Effect Error":h(yt,{children:r}),e===0&&t===0&&!!(r%5)&&h(W,{to:Fe.getElementById("portal"),children:h(bt,{})})]})})}),wt=G(({item:{color:e,name:t,words:r}})=>x("div",{style:{borderTop:"10px solid #000",borderRight:"10px solid #000",padding:"1rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",aspectRatio:"1",backgroundColor:e},children:[h("div",{style:{fontWeight:"bold"},children:t}),r.map((n,s)=>h("div",{children:n},s))]})),le=we(0),xt=1e4,We=()=>{let[e,t]=A(new Date().getSeconds()),[r,n]=A(Array.from({length:10},(c,i)=>i)),[s,u]=A("");z(()=>{let c=gt(()=>{t(new Date().getSeconds()),n(i=>i.toSorted(()=>Math.random()-.5))},1e3);return()=>mt(c)},[]);let o=S(()=>Array.from({length:xt},(c,i)=>({color:$e(i),id:i+1,name:`Item ${Be.format(i+1)}`,words:Array.from({length:3},Me)}))),l=S(()=>{if(!s)return o;let c=s.toLowerCase().split(/\s+/);return o.filter(i=>c.every(d=>i.words.some(a=>a.includes(d))))},[s]),b=j(null),{start:w,end:p,before:m,after:f}=Pe({containerRef:b,length:l.length});return x(le,{value:e,children:[h("div",{style:{boxSizing:"border-box",cursor:"crosshair",display:"grid",gap:"0.25rem",gridTemplate:`repeat(${C}, 1fr) / repeat(${C}, 1fr)`,height:"100%",padding:"0.25rem"},children:Array.from({length:C*C},(c,i)=>h(vt,{x:i%C,y:Math.floor(i/C)},i))}),h("div",{style:{boxSizing:"border-box",cursor:"crosshair",display:"grid",gap:"0.25rem",gridTemplateColumns:"repeat(2, 1fr)",padding:"1rem"},children:r.map(c=>x(Y,{children:[x("div",{style:{background:$e(c),borderBottomLeftRadius:"0.25rem",borderTopLeftRadius:"0.25rem",color:"white",display:"flex",padding:"0.5rem"},children:["Input ",c+1]}),h("input",{placeholder:`Input ${c+1}`,style:{border:"0",borderBottomRightRadius:"0.25rem",borderTopRightRadius:"0.25rem",display:"block",flex:"1",padding:"0.5rem"}})]},c))}),x("div",{style:{padding:"1rem"},children:[x("div",{style:{marginBottom:"0.5rem",display:"flex",justifyContent:"space-between"},children:[x("div",{style:{color:"white",fontWeight:"bold"},children:[Be.format(l.length)," Items"]}),h("input",{placeholder:"Search",type:"search",value:s,oninput:c=>u(c.target.value),style:{borderRadius:"0.25rem",border:"0",padding:"0.5rem"}})]}),h("div",{style:{minHeight:"100vh"},children:h("div",{"data-list-container":"true",ref:b,style:{color:"white",paddingTop:`${m}px`,paddingBottom:`${f}px`,display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(200px, 50%), 1fr))",borderLeft:"10px solid #000",borderBottom:"10px solid #000"},children:Array.from({length:p-w},(c,i)=>{let d=l[w+i];return h(wt,{item:d},d.id)})})})]}),h("button",{onclick:()=>se(x("div",{style:{padding:"1rem",textAlign:"center"},children:[h("div",{style:{color:"white",marginBottom:"1rem"},children:"Unmounted!"}),h("button",{onclick:()=>se(h(We,{})),children:"Remount"})]})),style:{position:"fixed",bottom:"1rem",right:"1rem"},children:"Unmount"})]})},se=Ce(Fe.getElementById("root").attachShadow({mode:"open"}));se(h(We,{}));})();
