"use strict";(()=>{var{CSSStyleDeclaration:j,document:Q,queueMicrotask:te,Text:ne}=globalThis,i=(e,t=z,n)=>({type:e,props:t,key:n}),S=i;var h=e=>e.children,D=e=>e.children,q=()=>{let e=({value:t,children:n})=>{let r=a,l=g(()=>{let o={deps:new Set,value:t};return r.contexts=new Map(r.contexts).set(e,o),o});if(t!==l.value){l.value=t;for(let o of l.deps){o.state=1;let{parent:s}=o;for(;s&&s!==r&&!s.state;)s.state=2,{parent:s}=s}}return n};return e},B=e=>e==null||e===!1||e==="",z={},F={},re={type:F,props:z,key:void 0},_={},se=[],oe="http://www.w3.org/2000/svg",fe=(e,t,n)=>{if(typeof e=="function"||e===F)return null;if(e===_)return Q.createTextNode(t.nodeValue);let r=Q.createElementNS(e==="svg"?oe:n.namespaceURI,e);return G(r,{},t),r},U=(e,t)=>t in e&&(e[t]==null||typeof e[t]!="object"),$=(e,t,n)=>{for(let r in t)r in n||(e[r]="");for(let r in n)e[r]=n[r]??""},G=(e,t,n)=>{if(e instanceof ne){e.nodeValue=n.nodeValue;return}for(let r in t)r==="children"||r in n||(r==="ref"?t.ref&&(t.ref.current=null):e[r]instanceof j?$(e[r],t[r],{}):U(e,r)?e[r]="":e.removeAttribute(r));for(let r in n)r==="children"||t[r]===n[r]||(r==="ref"?(t.ref&&(t.ref.current=null),n.ref&&(n.ref.current=e)):e[r]instanceof j?$(e[r],t[r],n[r]):U(e,r)?e[r]=n[r]??"":n[r]!=null?e.setAttribute(r,n[r]):e.removeAttribute(r))},a=null,H=0,J=0,b=[],w=[],C=[],k=[],x=[],p=[],E=e=>{let t=a;t.refs??=[];let n=t.refs[J++];return n||(n={current:e},t.refs.push(n)),n},T=(e,t)=>{let n=a;n.effects??=[];let r=n.effects[H++];r?(!r.deps||!t||K(r.deps,t))&&(r.after=e,r.deps=t):n.effects.push({before:void 0,after:e,deps:t})},g=(e,t=se)=>{let n=E(null);return n.current?K(n.current.deps,t)&&(n.current.value=e(),n.current.deps=t):n.current={value:e(),deps:t},n.current.value},A=e=>{let t=a,n=g(()=>[e,r=>{let l=typeof r=="function"?r(n[0]):r;return l===n[0]||(n[0]=l,ie(t)),l}]);return n},K=(e,t)=>{let{length:n}=e;if(n!==t.length)return!0;for(;n--;)if(e[n]!==t[n])return!0;return!1};var le=(e,t)=>{if(e===t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0},L=(e,t=le)=>(e.memo=t,e),I=e=>{let t=a,n=t.contexts?.get(e);return T(()=>{if(n)return n.deps.add(t),()=>n.deps.delete(t)},[n,t]),n?.value},ce=(e,t)=>{for(;e.depth>t.depth;)if(e=e.parent,e===t)return 1;for(;t.depth>e.depth;)if(t=t.parent,t===e)return-1;for(;e.parent!==t.parent;)e=e.parent,t=t.parent;return e.index-t.index},ie=e=>{e.state===1||e.state===3||(p.length===0&&te(()=>{let t=p.sort(ce);p=[];for(let n=0;n<t.length;++n){let r=t[n];r.state===1&&M(r)}Y()}),p.push(e),e.state=1)},ue=e=>{let{children:t}=e.props;return typeof e.type=="function"&&(a=e,H=0,J=0,t=e.type(e.props)),B(t)?[]:Array.isArray(t)?t:[t]},ae=e=>B(e)?re:Array.isArray(e)?{type:h,props:{children:e},key:void 0}:typeof e!="object"?{type:_,props:{nodeValue:e},key:void 0}:e,O=(e,t,n,r,l,o)=>({child:null,contexts:r?.contexts??null,depth:r?r.depth+1:0,effects:null,index:o,key:n,lastNode:null,node:fe(e,t,l),parent:r,parentNode:l,prevNode:null,props:t,refs:null,sibling:null,state:1,type:e}),W=e=>{let{child:t,state:n}=e;if(n===1)M(e);else if(n===2)for(e.state=0;t;t=t.sibling)W(t)},v=({child:e,node:t})=>{if(t)return[t];let n=[];for(;e;e=e.sibling)n.push(...v(e));return n},M=e=>{if(e.effects)for(let s=0;s<e.effects.length;++s){let c=e.effects[s];c.after&&c.before&&(c.before(),c.before=void 0)}let t=e.child,n=t&&new Map;for(;t;t=t.sibling)n.set(t.key??t.index,t);let r=e.node??e.parentNode,l=ue(e);e.state=0,e.child=null;let o=e.node?null:e.prevNode;for(let s=0,c=null;s<l.length;++s){let{type:m,props:d,key:y}=ae(l[s]),f=n?.get(y??s),R=!1,N=null,V=!1;f?.type===m?(n.delete(y??s),f.index=s,f.sibling=null,(typeof f.type!="function"||!f.type.memo?.(f.props,d))&&(f.node&&(N=[f.node,f.props,d]),f.props=d,f.state=1),f.parentNode===r&&f.lastNode&&o!==f.prevNode&&(R=!0)):(f=O(m,d,y,e,m===D?d.to:r,s),f.node&&(V=!0)),f.parentNode===r&&(f.prevNode=o),c?c.sibling=f:e.child=f,W(f),R&&w.push(f),N&&C.push(N),V&&k.push(f),f.parentNode===r&&f.lastNode&&(o=f.lastNode),c=f}if(e.lastNode=e.node??o??null,n)for(let s of n.values())X(s,!0);if(e.effects)for(let s=0;s<e.effects.length;++s){let c=e.effects[s];c.after&&x.push(c)}},X=(e,t)=>{e.state=3;let{effects:n,child:r,node:l}=e;if(n)for(let s=0;s<n.length;++s){let c=n[s];c.before&&(c.before(),c.before=void 0)}let o=t&&!l;for(;r;r=r.sibling)X(r,o);t&&l&&b.unshift(l)},Y=()=>{let e=b;b=[];let t=w;w=[];let n=C;C=[];let r=k;k=[];let l=x;x=[];for(let o=e.length-1;o>=0;--o)e[o].remove();for(let o=0;o<t.length;++o){let s=t[o];s.prevNode?s.prevNode.after(...v(s)):s.parentNode.prepend(...v(s))}for(let o=0;o<n.length;++o)G(...n[o]);for(let o=0;o<r.length;++o){let s=r[o];s.prevNode?s.prevNode.after(s.node):s.parentNode.prepend(s.node)}for(let o=0;o<l.length;++o){let s=l[o];s.before=s.after(),s.after=void 0}},Z=(e,t)=>{M(O(h,{children:e},void 0,null,t,0)),Y()};var{clearTimeout:de,document:ee,setTimeout:pe,setInterval:he}=globalThis,u=10,ge=L(({x:e,y:t})=>{let n=I(P)??0,r=g(()=>`rgb(${128+(e-t)/u*128}, ${128+(t-e)/u*128}, ${(e+t)/u/2*256})`),l=E(void 0),[o,s]=A("black");return S(h,{children:[i("div",{onpointermove:()=>{s(r),de(l.current),l.current=pe(()=>s("black"),5e3)},ontouchmove:c=>c.preventDefault(),style:{backgroundColor:o,transition:o==="black"?"all 5s":"",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:n}),e===1&&t===1&&!!(n%5)&&i(me,{})]})}),me=()=>{let e=I(P);return i(D,{to:ee.getElementById("portal"),children:S("div",{style:{background:"#fff9",borderRadius:"0.25rem",padding:"1rem"},children:["Portal: ",e]})})},P=q(),ye=()=>{let[e,t]=A(new Date().getSeconds());return T(()=>{he(()=>t(new Date().getSeconds()),1e3)}),i(P,{value:e,children:i("div",{style:{cursor:"crosshair",display:"grid",gridTemplate:`repeat(${u}, 1fr) / repeat(${u}, 1fr)`,height:"100%"},children:Array.from({length:u*u},(n,r)=>i(ge,{x:r%u,y:Math.floor(r/u)},r))})})};Z(i(ye,{}),ee.getElementById("root"));})();
